{"version":3,"file":"realtime-sync.js","sources":["../../src/plugins/realtime-sync.ts"],"sourcesContent":[null],"names":["RealtimeSync","EventEmitter","constructor","config","Object","defineProperty","value","Map","url","autoReconnect","reconnectDelay","heartbeatInterval","maxReconnectAttempts","enableOfflineQueue","conflictResolution","state","connected","syncing","lastSync","pendingUpdates","conflicts","peers","localUserId","generateUserId","localUserName","connect","Promise","resolve","reject","ws","WebSocket","onopen","handleConnect","onmessage","event","handleMessage","data","onerror","error","handleError","onclose","handleDisconnect","disconnect","reconnectTimer","clearTimeout","heartbeatTimer","clearInterval","close","emit","reconnectAttempts","send","userId","userName","timestamp","Date","now","startHeartbeat","offlineQueue","length","flushOfflineQueue","clear","scheduleReconnect","console","message","JSON","parse","type","handleRemoteUpdate","handlePeerJoin","handlePeerLeave","handlePeerCursor","handleSyncRequest","handleSyncResponse","handleConflict","handleTransform","warn","update","localVersion","versionMap","get","locale","key","version","detectAndResolveConflict","applyUpdate","set","peer","size","oldestPeer","Array","from","entries","sort","a","b","lastSeen","delete","id","peerId","cursor","response","gatherLocalTranslations","keys","since","translations","conflict","conflictQueue","push","autoResolveConflict","transform","queue","transformQueue","maxTransformQueueSize","slice","sortedKeys","Number","parseInt","keysToDelete","forEach","k","applyTransform","updateTranslation","oldValue","generateUpdateId","getNextVersion","checksum","calculateChecksum","entriesToDelete","maxQueueSize","shift","broadcastCursor","position","selection","requestSync","remoteUpdate","localValue","getLocalTranslation","local","remote","resolution","mergedValue","mergeTranslations","applyConflictResolution","filter","c","base","undefined","valueToApply","delay","Math","min","setTimeout","catch","attempt","setInterval","stringify","random","toString","substr","currentVersion","hash","i","charCodeAt","getState","getPeers","values","getConflicts","resolveConflict","setUserInfo","lockTranslation","unlockTranslation","sendComment","comment","destroy","removeAllListeners","realtimeSync"],"mappings":";;;;;;;;;;;AAuEM,MAAOA,qBAAqBC,YAAAA,CAAY;AAAA,EAgB5CC,WAAAA,CAAYC,MAAAA,GAA8B,EAAA,EAAE;AAC1C,IAAA,KAAA;AAhBMC,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,QAAA,EAAA;AAAA;;;;KAAmB,CAAA;AACnBD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,IAAA,EAAA;AAAA;;;aAAuB;AAAA,KAAK,CAAA;AAC5BD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,OAAA,EAAA;AAAA;;;;KAAiB,CAAA;AACjBD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,mBAAA,EAAA;AAAA;;;aAA4B;AAAA,KAAE,CAAA;AAC9BD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,gBAAA,EAAA;AAAA;;;aAAwC;AAAA,KAAK,CAAA;AAC7CD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,gBAAA,EAAA;AAAA;;;aAAwC;AAAA,KAAK,CAAA;AAC7CD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,cAAA,EAAA;AAAA;;;aAAoC;AAAA,KAAG,CAAA;AACvCD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,YAAA,EAAA;AAAA;;;MAAkCC,KAAAA,sBAAIC,GAAAA;AAAG,KAAG,CAAA;AAC5CH,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,eAAA,EAAA;AAAA;;;aAA4B;AAAA,KAAG,CAAA;AAC/BD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,gBAAA,EAAA;AAAA;;;MAAsDC,KAAAA,sBAAIC,GAAAA;AAAG,KAAG,CAAA;AAChEH,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,aAAA,EAAA;AAAA;;;;KAAoB,CAAA;AACpBD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,eAAA,EAAA;AAAA;;;;KAAsB,CAAA;AACtBD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,cAAA,EAAA;AAAA;;;aAAuB;AAAA,KAAK,CAAA;AAC5BD,IAAAA,MAAAA,CAAAC,cAAAA,CAAA,MAAA,uBAAA,EAAA;AAAA;;;aAAgC;AAAA,KAAI,CAAA;AAK1C,IAAA,IAAA,CAAKF,MAAAA,GAAS;AAAA,MACZK,GAAAA,EAAKL,OAAOK,GAAAA,IAAO,0BAAA;AAAA,MACnBC,aAAAA,EAAeN,OAAOM,aAAAA,KAAkB,KAAA;AAAA,MACxCC,cAAAA,EAAgBP,OAAOO,cAAAA,IAAkB,GAAA;AAAA,MACzCC,iBAAAA,EAAmBR,OAAOQ,iBAAAA,IAAqB,GAAA;AAAA,MAC/CC,oBAAAA,EAAsBT,OAAOS,oBAAAA,IAAwB,EAAA;AAAA,MACrDC,kBAAAA,EAAoBV,OAAOU,kBAAAA,KAAuB,KAAA;AAAA,MAClDC,kBAAAA,EAAoBX,OAAOW,kBAAAA,IAAsB;AAAA;AAGnD,IAAA,IAAA,CAAKC,KAAAA,GAAQ;AAAA,MACXC,SAAAA,EAAW,KAAA;AAAA,MACXC,OAAAA,EAAS,KAAA;AAAA,MACTC,QAAAA,EAAU,CAAA;AAAA,MACVC,cAAAA,EAAgB,CAAA;AAAA,MAChBC,SAAAA,EAAW,CAAA;AAAA,MACXC,KAAAA,sBAAWd,GAAAA;AAAG;AAGhB,IAAA,IAAA,CAAKe,WAAAA,GAAc,KAAKC,cAAAA;AACxB,IAAA,IAAA,CAAKC,aAAAA,GAAgB,MAAA;AAAA,EACvB;AAAA,EAEAC,OAAAA,GAAO;AACL,IAAA,OAAO,IAAIC,OAAAA,CAAQ,CAACC,OAAAA,EAASC,MAAAA,KAAU;AACrC,MAAA,IAAI,IAAA,CAAKC,EAAAA,IAAM,IAAA,CAAKd,KAAAA,CAAMC,SAAAA,EAAW;AACnCW,QAAAA,OAAAA;AACA,QAAA;AAAA,MACF;AAEA,MAAA,IAAI;AACF,QAAA,IAAA,CAAKE,EAAAA,GAAK,IAAIC,SAAAA,CAAU,IAAA,CAAK3B,QAAQK,GAAG,CAAA;AAExC,QAAA,IAAA,CAAKqB,EAAAA,CAAGE,SAAS,MAAK;AACpB,UAAA,IAAA,CAAKC,aAAAA,EAAa;AAClBL,UAAAA,OAAAA;QACF,CAAA;AAEA,QAAA,IAAA,CAAKE,EAAAA,CAAGI,YAAaC,CAAAA,KAAAA,KAAS;AAC5B,UAAA,IAAA,CAAKC,aAAAA,CAAcD,MAAME,IAAI,CAAA;AAAA,QAC/B,CAAA;AAEA,QAAA,IAAA,CAAKP,EAAAA,CAAGQ,UAAWC,CAAAA,KAAAA,KAAS;AAC1B,UAAA,IAAA,CAAKC,YAAYD,KAAK,CAAA;AACtBV,UAAAA,MAAAA,CAAOU,KAAK,CAAA;AAAA,QACd,CAAA;AAEA,QAAA,IAAA,CAAKT,EAAAA,CAAGW,UAAU,MAAK;AACrB,UAAA,IAAA,CAAKC,gBAAAA,EAAgB;AAAA,QACvB,CAAA;AAAA,MACF,SAASH,KAAAA,EAAO;AACdV,QAAAA,MAAAA,CAAOU,KAAK,CAAA;AAAA,MACd;AAAA,IACF,CAAC,CAAA;AAAA,EACH;AAAA,EAEAI,UAAAA,GAAU;AACR,IAAA,IAAI,KAAKvC,MAAAA,EAAQ;AACf,MAAA,IAAA,CAAKA,OAAOM,aAAAA,GAAgB,KAAA;AAAA,IAC9B;AAEA,IAAA,IAAI,KAAKkC,cAAAA,EAAgB;AACvBC,MAAAA,YAAAA,CAAa,KAAKD,cAAc,CAAA;AAChC,MAAA,IAAA,CAAKA,cAAAA,GAAiB,IAAA;AAAA,IACxB;AAEA,IAAA,IAAI,KAAKE,cAAAA,EAAgB;AACvBC,MAAAA,aAAAA,CAAc,KAAKD,cAAc,CAAA;AACjC,MAAA,IAAA,CAAKA,cAAAA,GAAiB,IAAA;AAAA,IACxB;AAEA,IAAA,IAAI,KAAKhB,EAAAA,EAAI;AACX,MAAA,IAAA,CAAKA,GAAGkB,KAAAA;AACR,MAAA,IAAA,CAAKlB,EAAAA,GAAK,IAAA;AAAA,IACZ;AAEA,IAAA,IAAA,CAAKd,MAAMC,SAAAA,GAAY,KAAA;AACvB,IAAA,IAAA,CAAKgC,KAAK,YAAY,CAAA;AAAA,EACxB;AAAA,EAEQhB,aAAAA,GAAa;AACnB,IAAA,IAAA,CAAKjB,MAAMC,SAAAA,GAAY,IAAA;AACvB,IAAA,IAAA,CAAKiC,iBAAAA,GAAoB,CAAA;AAGzB,IAAA,IAAA,CAAKC,KAAK,UAAA,EAAY;AAAA,MACpBC,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,MACb8B,UAAU,IAAA,CAAK5B,aAAAA;AAAAA,MACf6B,SAAAA,EAAWC,KAAKC,GAAAA;AAAG,KACpB,CAAA;AAGD,IAAA,IAAA,CAAKC,cAAAA,EAAc;AAGnB,IAAA,IAAI,KAAKrD,MAAAA,EAAQU,kBAAAA,IAAsB,IAAA,CAAK4C,YAAAA,CAAaC,SAAS,CAAA,EAAG;AACnE,MAAA,IAAA,CAAKC,iBAAAA,EAAiB;AAAA,IACxB;AAEA,IAAA,IAAA,CAAKX,KAAK,SAAS,CAAA;AAAA,EACrB;AAAA,EAEQP,gBAAAA,GAAgB;AACtB,IAAA,IAAA,CAAK1B,MAAMC,SAAAA,GAAY,KAAA;AACvB,IAAA,IAAA,CAAKD,KAAAA,CAAMM,MAAMuC,KAAAA;AAEjB,IAAA,IAAI,KAAKf,cAAAA,EAAgB;AACvBC,MAAAA,aAAAA,CAAc,KAAKD,cAAc,CAAA;AACjC,MAAA,IAAA,CAAKA,cAAAA,GAAiB,IAAA;AAAA,IACxB;AAEA,IAAA,IAAI,KAAK1C,MAAAA,EAAQM,aAAAA,IAAiB,KAAKwC,iBAAAA,GAAoB,IAAA,CAAK9C,QAAQS,oBAAAA,EAAsB;AAC5F,MAAA,IAAA,CAAKiD,iBAAAA,EAAiB;AAAA,IACxB;AAEA,IAAA,IAAA,CAAKb,KAAK,YAAY,CAAA;AAAA,EACxB;AAAA,EAEQT,YAAYD,KAAAA,EAAY;AAC9BwB,IAAAA,OAAAA,CAAQxB,KAAAA,CAAM,oBAAoBA,KAAK,CAAA;AACvC,IAAA,IAAA,CAAKU,IAAAA,CAAK,SAASV,KAAK,CAAA;AAAA,EAC1B;AAAA,EAEQH,cAAcC,IAAAA,EAAY;AAChC,IAAA,IAAI;AACF,MAAA,MAAM2B,OAAAA,GAAUC,IAAAA,CAAKC,KAAAA,CAAM7B,IAAI,CAAA;AAE/B,MAAA,QAAQ2B,QAAQG,IAAAA;AAAI,QAClB,KAAK,QAAA;AACH,UAAA,IAAA,CAAKC,kBAAAA,CAAmBJ,QAAQ3B,IAAI,CAAA;AACpC,UAAA;AAAA,QACF,KAAK,WAAA;AACH,UAAA,IAAA,CAAKgC,cAAAA,CAAeL,QAAQ3B,IAAI,CAAA;AAChC,UAAA;AAAA,QACF,KAAK,YAAA;AACH,UAAA,IAAA,CAAKiC,eAAAA,CAAgBN,QAAQ3B,IAAI,CAAA;AACjC,UAAA;AAAA,QACF,KAAK,aAAA;AACH,UAAA,IAAA,CAAKkC,gBAAAA,CAAiBP,QAAQ3B,IAAI,CAAA;AAClC,UAAA;AAAA,QACF,KAAK,cAAA;AACH,UAAA,IAAA,CAAKmC,iBAAAA,CAAkBR,QAAQ3B,IAAI,CAAA;AACnC,UAAA;AAAA,QACF,KAAK,eAAA;AACH,UAAA,IAAA,CAAKoC,kBAAAA,CAAmBT,QAAQ3B,IAAI,CAAA;AACpC,UAAA;AAAA,QACF,KAAK,UAAA;AACH,UAAA,IAAA,CAAKqC,cAAAA,CAAeV,QAAQ3B,IAAI,CAAA;AAChC,UAAA;AAAA,QACF,KAAK,WAAA;AACH,UAAA,IAAA,CAAKsC,eAAAA,CAAgBX,QAAQ3B,IAAI,CAAA;AACjC,UAAA;AAAA,QACF,KAAK,WAAA;AAEH,UAAA;AAAA,QACF;AACE0B,UAAAA,OAAAA,CAAQa,IAAAA,CAAK,uBAAA,EAAyBZ,OAAAA,CAAQG,IAAI,CAAA;AAAA;AACtD,IACF,SAAS5B,KAAAA,EAAO;AACdwB,MAAAA,OAAAA,CAAQxB,KAAAA,CAAM,2BAA2BA,KAAK,CAAA;AAAA,IAChD;AAAA,EACF;AAAA,EAEQ6B,mBAAmBS,MAAAA,EAAyB;AAElD,IAAA,MAAMC,YAAAA,GAAe,IAAA,CAAKC,UAAAA,CAAWC,GAAAA,CAAI,CAAA,EAAGH,MAAAA,CAAOI,MAAM,CAAA,CAAA,EAAIJ,MAAAA,CAAOK,GAAG,CAAA,CAAE,CAAA,IAAK,CAAA;AAE9E,IAAA,IAAIL,MAAAA,CAAOM,WAAWL,YAAAA,EAAc;AAElC,MAAA,IAAA,CAAKM,yBAAyBP,MAAM,CAAA;AACpC,MAAA;AAAA,IACF;AAGA,IAAA,IAAA,CAAKQ,YAAYR,MAAM,CAAA;AAGvB,IAAA,IAAA,CAAKE,UAAAA,CAAWO,GAAAA,CAAI,CAAA,EAAGT,MAAAA,CAAOI,MAAM,IAAIJ,MAAAA,CAAOK,GAAG,CAAA,CAAA,EAAIL,MAAAA,CAAOM,OAAO,CAAA;AAGpE,IAAA,IAAA,CAAKlC,IAAAA,CAAK,sBAAsB4B,MAAM,CAAA;AAGtC,IAAA,IAAA,CAAK7D,KAAAA,CAAMG,QAAAA,GAAWoC,IAAAA,CAAKC,GAAAA,EAAG;AAAA,EAChC;AAAA,EAEQa,eAAekB,IAAAA,EAAc;AAEnC,IAAA,IAAI,IAAA,CAAKvE,KAAAA,CAAMM,KAAAA,CAAMkE,IAAAA,IAAQ,GAAA,EAAK;AAEhC,MAAA,MAAMC,UAAAA,GAAaC,MAAMC,IAAAA,CAAK,IAAA,CAAK3E,MAAMM,KAAAA,CAAMsE,OAAAA,EAAS,CAAA,CACrDC,IAAAA,CAAK,CAACC,GAAGC,CAAAA,KAAMD,CAAAA,CAAE,CAAC,CAAA,CAAEE,QAAAA,GAAWD,EAAE,CAAC,CAAA,CAAEC,QAAQ,CAAA,CAAE,CAAC,CAAA;AAClD,MAAA,IAAIP,UAAAA,EAAY;AACd,QAAA,IAAA,CAAKzE,KAAAA,CAAMM,KAAAA,CAAM2E,MAAAA,CAAOR,UAAAA,CAAW,CAAC,CAAC,CAAA;AAAA,MACvC;AAAA,IACF;AACA,IAAA,IAAA,CAAKzE,KAAAA,CAAMM,KAAAA,CAAMgE,GAAAA,CAAIC,IAAAA,CAAKW,IAAIX,IAAI,CAAA;AAClC,IAAA,IAAA,CAAKtC,IAAAA,CAAK,aAAasC,IAAI,CAAA;AAAA,EAC7B;AAAA,EAEQjB,gBAAgB6B,MAAAA,EAAc;AACpC,IAAA,MAAMZ,IAAAA,GAAO,IAAA,CAAKvE,KAAAA,CAAMM,KAAAA,CAAM0D,IAAImB,MAAM,CAAA;AACxC,IAAA,IAAIZ,IAAAA,EAAM;AACR,MAAA,IAAA,CAAKvE,KAAAA,CAAMM,KAAAA,CAAM2E,MAAAA,CAAOE,MAAM,CAAA;AAC9B,MAAA,IAAA,CAAKlD,IAAAA,CAAK,cAAcsC,IAAI,CAAA;AAAA,IAC9B;AAAA,EACF;AAAA,EAEQhB,iBAAiBlC,IAAAA,EAAgD;AACvE,IAAA,MAAMkD,OAAO,IAAA,CAAKvE,KAAAA,CAAMM,KAAAA,CAAM0D,GAAAA,CAAI3C,KAAKe,MAAM,CAAA;AAC7C,IAAA,IAAImC,IAAAA,EAAM;AACRA,MAAAA,IAAAA,CAAKa,SAAS/D,IAAAA,CAAK+D,MAAAA;AACnBb,MAAAA,IAAAA,CAAKS,QAAAA,GAAWzC,KAAKC,GAAAA;AACrB,MAAA,IAAA,CAAKP,KAAK,aAAA,EAAe;AAAA,QAAEsC,IAAAA;AAAAA,QAAMa,QAAQ/D,IAAAA,CAAK+D;AAAAA,OAAQ,CAAA;AAAA,IACxD;AAAA,EACF;AAAA,EAEQ5B,kBAAkBnC,IAAAA,EAAwD;AAEhF,IAAA,MAAMgE,QAAAA,GAAW,KAAKC,uBAAAA,CAAwBjE,IAAAA,CAAKkE,MAAMlE,IAAAA,CAAK4C,MAAAA,EAAQ5C,KAAKmE,KAAK,CAAA;AAChF,IAAA,IAAA,CAAKrD,IAAAA,CAAK,iBAAiBkD,QAAQ,CAAA;AAAA,EACrC;AAAA,EAEQ5B,mBAAmBpC,IAAAA,EAA2C;AAEpE,IAAA,KAAA,MAAWwC,MAAAA,IAAUxC,KAAKoE,YAAAA,EAAc;AACtC,MAAA,IAAA,CAAKrC,mBAAmBS,MAAM,CAAA;AAAA,IAChC;AAAA,EACF;AAAA,EAEQH,eAAegC,QAAAA,EAAkB;AACvC,IAAA,IAAA,CAAKC,aAAAA,CAAcC,KAAKF,QAAQ,CAAA;AAChC,IAAA,IAAA,CAAK1F,KAAAA,CAAMK,SAAAA,GAAY,IAAA,CAAKsF,aAAAA,CAAchD,MAAAA;AAG1C,IAAA,IAAI,IAAA,CAAKvD,MAAAA,EAAQW,kBAAAA,KAAuB,QAAA,EAAU;AAChD,MAAA,IAAA,CAAK8F,oBAAoBH,QAAQ,CAAA;AAAA,IACnC,CAAA,MAAO;AACL,MAAA,IAAA,CAAKzD,IAAAA,CAAK,YAAYyD,QAAQ,CAAA;AAAA,IAChC;AAAA,EACF;AAAA,EAEQ/B,gBAAgBmC,SAAAA,EAA+B;AACrD,IAAA,MAAM5B,GAAAA,GAAM,CAAA,EAAG4B,SAAAA,CAAU3B,OAAO,CAAA,CAAA;AAChC,IAAA,IAAI4B,QAAQ,IAAA,CAAKC,cAAAA,CAAehC,GAAAA,CAAIE,GAAG,KAAK,EAAA;AAG5C,IAAA,IAAI6B,KAAAA,CAAMpD,MAAAA,IAAU,IAAA,CAAKsD,qBAAAA,EAAuB;AAC9CF,MAAAA,KAAAA,GAAQA,KAAAA,CAAMG,KAAAA,CAAM,CAAC,IAAA,CAAKD,wBAAwB,CAAC,CAAA;AAAA,IACrD;AACAF,IAAAA,KAAAA,CAAMH,KAAKE,SAAS,CAAA;AACpB,IAAA,IAAA,CAAKE,cAAAA,CAAe1B,GAAAA,CAAIJ,GAAAA,EAAK6B,KAAK,CAAA;AAGlC,IAAA,IAAI,IAAA,CAAKC,cAAAA,CAAexB,IAAAA,GAAO,EAAA,EAAI;AACjC,MAAA,MAAM2B,aAAazB,KAAAA,CAAMC,IAAAA,CAAK,KAAKqB,cAAAA,CAAeT,IAAAA,EAAM,CAAA,CACrDV,IAAAA,CAAK,CAACC,CAAAA,EAAGC,CAAAA,KAAMqB,OAAOC,QAAAA,CAASvB,CAAC,IAAIsB,MAAAA,CAAOC,QAAAA,CAAStB,CAAC,CAAC,CAAA;AACzD,MAAA,MAAMuB,eAAeH,UAAAA,CAAWD,KAAAA,CAAM,CAAA,EAAGC,UAAAA,CAAWxD,SAAS,EAAE,CAAA;AAC/D2D,MAAAA,YAAAA,CAAaC,QAAQC,CAAAA,CAAAA,KAAK,IAAA,CAAKR,cAAAA,CAAef,MAAAA,CAAOuB,CAAC,CAAC,CAAA;AAAA,IACzD;AAGA,IAAA,IAAA,CAAKC,eAAeX,SAAS,CAAA;AAAA,EAC/B;AAAA,EAEAY,iBAAAA,CAAkBzC,MAAAA,EAAgBC,GAAAA,EAAa3E,KAAAA,EAAeoH,QAAAA,EAAiB;AAC7E,IAAA,MAAM9C,MAAAA,GAA4B;AAAA,MAChCqB,EAAAA,EAAI,KAAK0B,gBAAAA,EAAgB;AAAA,MACzB3C,MAAAA;AAAAA,MACAC,GAAAA;AAAAA,MACA3E,KAAAA;AAAAA,MACAoH,QAAAA;AAAAA,MACArE,SAAAA,EAAWC,KAAKC,GAAAA,EAAG;AAAA,MACnBJ,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,MACb8B,UAAU,IAAA,CAAK5B,aAAAA;AAAAA,MACf0D,OAAAA,EAAS,IAAA,CAAK0C,cAAAA,CAAe5C,MAAAA,EAAQC,GAAG,CAAA;AAAA,MACxC4C,QAAAA,EAAU,IAAA,CAAKC,iBAAAA,CAAkBxH,KAAK;AAAA;AAGxC,IAAA,IAAI,IAAA,CAAKS,MAAMC,SAAAA,EAAW;AACxB,MAAA,IAAA,CAAKkC,IAAAA,CAAK,UAAU0B,MAAM,CAAA;AAC1B,MAAA,IAAA,CAAKE,UAAAA,CAAWO,IAAI,CAAA,EAAGL,MAAM,IAAIC,GAAG,CAAA,CAAA,EAAIL,OAAOM,OAAO,CAAA;AAGtD,MAAA,IAAI,IAAA,CAAKJ,UAAAA,CAAWS,IAAAA,GAAO,GAAA,EAAO;AAChC,QAAA,MAAMwC,eAAAA,GAAkBtC,KAAAA,CAAMC,IAAAA,CAAK,IAAA,CAAKZ,UAAAA,CAAWwB,MAAM,CAAA,CAAEW,KAAAA,CAAM,CAAA,EAAG,GAAI,CAAA;AACxEc,QAAAA,eAAAA,CAAgBT,QAAQC,CAAAA,CAAAA,KAAK,IAAA,CAAKzC,UAAAA,CAAWkB,MAAAA,CAAOuB,CAAC,CAAC,CAAA;AAAA,MACxD;AAAA,IACF,CAAA,MAAA,IAAW,IAAA,CAAKpH,MAAAA,EAAQU,kBAAAA,EAAoB;AAE1C,MAAA,IAAI,IAAA,CAAK4C,YAAAA,CAAaC,MAAAA,IAAU,IAAA,CAAKsE,YAAAA,EAAc;AACjD,QAAA,IAAA,CAAKvE,aAAawE,KAAAA,EAAK;AAAA,MACzB;AACA,MAAA,IAAA,CAAKxE,YAAAA,CAAakD,KAAK/B,MAAM,CAAA;AAC7B,MAAA,IAAA,CAAK7D,KAAAA,CAAMI,cAAAA,GAAiB,IAAA,CAAKsC,YAAAA,CAAaC,MAAAA;AAAAA,IAChD;AAEA,IAAA,IAAA,CAAKV,IAAAA,CAAK,qBAAqB4B,MAAM,CAAA;AAAA,EACvC;AAAA,EAEAsD,eAAAA,CAAgBjD,GAAAA,EAAakD,QAAAA,EAAkBC,SAAAA,EAA0C;AACvF,IAAA,IAAI,CAAC,IAAA,CAAKrH,KAAAA,CAAMC,SAAAA,EAAW;AAE3B,IAAA,MAAMmF,MAAAA,GAAyB;AAAA,MAC7BlB,GAAAA;AAAAA,MACAkD,QAAAA;AAAAA,MACAC;AAAAA;AAGF,IAAA,IAAA,CAAKlF,KAAK,QAAA,EAAU;AAAA,MAClBC,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,MACb6E;AAAAA,KACD,CAAA;AAAA,EACH;AAAA,EAEAkC,WAAAA,CAAY/B,IAAAA,EAAiBtB,MAAAA,EAAiBuB,KAAAA,EAAc;AAC1D,IAAA,IAAI,CAAC,IAAA,CAAKxF,KAAAA,CAAMC,SAAAA,EAAW;AAE3B,IAAA,IAAA,CAAKkC,KAAK,cAAA,EAAgB;AAAA,MACxBoD,IAAAA,EAAMA,QAAQ,EAAA;AAAA,MACdtB,QAAQA,MAAAA,IAAU,GAAA;AAAA,MAClBuB,OAAOA,KAAAA,IAAS;AAAA,KACjB,CAAA;AAAA,EACH;AAAA,EAEQpB,yBAAyBmD,YAAAA,EAA+B;AAE9D,IAAA,MAAMC,aAAa,IAAA,CAAKC,mBAAAA,CAAoBF,YAAAA,CAAatD,MAAAA,EAAQsD,aAAarD,GAAG,CAAA;AAEjF,IAAA,IAAIsD,UAAAA,IAAcA,UAAAA,KAAeD,YAAAA,CAAaZ,QAAAA,EAAU;AACtD,MAAA,MAAMjB,QAAAA,GAAqB;AAAA,QACzBxB,KAAKqD,YAAAA,CAAarD,GAAAA;AAAAA,QAClBD,QAAQsD,YAAAA,CAAatD,MAAAA;AAAAA,QACrByD,KAAAA,EAAO;AAAA,UACL,GAAGH,YAAAA;AAAAA,UACHhI,KAAAA,EAAOiI,UAAAA;AAAAA,UACPpF,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,UACb8B,UAAU,IAAA,CAAK5B;AAAAA,SAChB;AAAA,QACDkH,MAAAA,EAAQJ;AAAAA;AAGV,MAAA,IAAA,CAAK7D,eAAegC,QAAQ,CAAA;AAAA,IAC9B,CAAA,MAAO;AAEL,MAAA,IAAA,CAAKrB,YAAYkD,YAAY,CAAA;AAAA,IAC/B;AAAA,EACF;AAAA,EAEQ1B,oBAAoBH,QAAAA,EAAkB;AAC5C,IAAA,IAAIkC,UAAAA,GAA4C,QAAA;AAChD,IAAA,IAAIC,WAAAA;AAEJ,IAAA,QAAQ,IAAA,CAAKzI,QAAQW,kBAAAA;AAAkB,MACrC,KAAK,QAAA;AACH6H,QAAAA,UAAAA,GAAalC,SAASgC,KAAAA,CAAMpF,SAAAA,GAAYoD,QAAAA,CAASiC,MAAAA,CAAOrF,YAAY,OAAA,GAAU,QAAA;AAC9E,QAAA;AAAA,MAEF,KAAK,OAAA;AAEHuF,QAAAA,WAAAA,GAAc,IAAA,CAAKC,iBAAAA,CACjBpC,QAAAA,CAASgC,KAAAA,CAAMnI,KAAAA,EACfmG,SAASiC,MAAAA,CAAOpI,KAAAA,EAChBmG,QAAAA,CAASgC,KAAAA,CAAMf,QAAQ,CAAA;AAEzB,QAAA,IAAIkB,WAAAA,EAAa;AACfD,UAAAA,UAAAA,GAAa,QAAA;AAAA,QACf,CAAA,MAAO;AAELA,UAAAA,UAAAA,GAAalC,SAASgC,KAAAA,CAAMpF,SAAAA,GAAYoD,QAAAA,CAASiC,MAAAA,CAAOrF,YAAY,OAAA,GAAU,QAAA;AAAA,QAChF;AACA,QAAA;AAAA;AAGJoD,IAAAA,QAAAA,CAASkC,UAAAA,GAAaA,UAAAA;AACtBlC,IAAAA,QAAAA,CAASmC,WAAAA,GAAcA,WAAAA;AAGvB,IAAA,IAAA,CAAKE,wBAAwBrC,QAAQ,CAAA;AAGrC,IAAA,IAAA,CAAKC,gBAAgB,IAAA,CAAKA,aAAAA,CAAcqC,MAAAA,CAAOC,CAAAA,CAAAA,KAAKA,MAAMvC,QAAQ,CAAA;AAGlE,IAAA,IAAI,IAAA,CAAKC,aAAAA,CAAchD,MAAAA,GAAS,GAAA,EAAK;AACnC,MAAA,IAAA,CAAKgD,aAAAA,GAAgB,IAAA,CAAKA,aAAAA,CAAcO,KAAAA,CAAM,IAAI,CAAA;AAAA,IACpD;AAEA,IAAA,IAAA,CAAKlG,KAAAA,CAAMK,SAAAA,GAAY,IAAA,CAAKsF,aAAAA,CAAchD,MAAAA;AAE1C,IAAA,IAAA,CAAKV,IAAAA,CAAK,qBAAqByD,QAAQ,CAAA;AAAA,EACzC;AAAA,EAEQoC,iBAAAA,CAAkBJ,KAAAA,EAAeC,MAAAA,EAAgBO,IAAAA,EAAa;AAEpE,IAAA,IAAI,CAACA,MAAM,OAAOC,MAAAA;AAGlB,IAAA,IAAIT,KAAAA,KAAUQ,MAAM,OAAOP,MAAAA;AAC3B,IAAA,IAAIA,MAAAA,KAAWO,MAAM,OAAOR,KAAAA;AAK5B,IAAA,OAAOS,MAAAA;AAAAA,EACT;AAAA,EAEQJ,wBAAwBrC,QAAAA,EAAkB;AAChD,IAAA,IAAI0C,YAAAA;AAEJ,IAAA,QAAQ1C,SAASkC,UAAAA;AAAU,MACzB,KAAK,OAAA;AACHQ,QAAAA,YAAAA,GAAe1C,SAASgC,KAAAA,CAAMnI,KAAAA;AAC9B,QAAA;AAAA,MACF,KAAK,QAAA;AACH6I,QAAAA,YAAAA,GAAe1C,SAASiC,MAAAA,CAAOpI,KAAAA;AAC/B,QAAA;AAAA,MACF,KAAK,QAAA;AACH6I,QAAAA,YAAAA,GAAe1C,QAAAA,CAASmC,WAAAA,IAAenC,QAAAA,CAASiC,MAAAA,CAAOpI,KAAAA;AACvD,QAAA;AAAA,MACF;AACE6I,QAAAA,YAAAA,GAAe1C,SAASiC,MAAAA,CAAOpI,KAAAA;AAAAA;AAInC,IAAA,MAAMsE,MAAAA,GAA4B;AAAA,MAChC,GAAG6B,QAAAA,CAASiC,MAAAA;AAAAA,MACZpI,KAAAA,EAAO6I,YAAAA;AAAAA,MACPjE,SAAS,IAAA,CAAK0C,cAAAA,CAAenB,QAAAA,CAASzB,MAAAA,EAAQyB,SAASxB,GAAG;AAAA;AAG5D,IAAA,IAAA,CAAKG,YAAYR,MAAM,CAAA;AAGvB,IAAA,IAAI,IAAA,CAAK7D,MAAMC,SAAAA,EAAW;AACxB,MAAA,IAAA,CAAKkC,KAAK,qBAAA,EAAuB;AAAA,QAC/BuD,QAAAA;AAAAA,QACAkC,UAAAA,EAAY/D;AAAAA,OACb,CAAA;AAAA,IACH;AAAA,EACF;AAAA,EAEQQ,YAAYR,MAAAA,EAAyB;AAI3C,IAAA,IAAA,CAAK5B,IAAAA,CAAK,gBAAgB4B,MAAM,CAAA;AAAA,EAClC;AAAA,EAEQ4C,eAAeX,SAAAA,EAA+B;AAIpD,IAAA,IAAA,CAAK7D,IAAAA,CAAK,mBAAmB6D,SAAS,CAAA;AAAA,EACxC;AAAA,EAEQR,uBAAAA,CAAwBC,IAAAA,EAAgBtB,MAAAA,EAAgBuB,KAAAA,EAAc;AAI5E,IAAA,OAAO;AAAA,MACLC,cAAc,EAAA;AAAA,MACdnD,SAAAA,EAAWC,KAAKC,GAAAA;AAAG;EAEvB;AAAA,EAEQiF,mBAAAA,CAAoBxD,QAAgBC,GAAAA,EAAW;AAGrD,IAAA,OAAOiE,MAAAA;AAAAA,EACT;AAAA,EAEQvF,iBAAAA,GAAiB;AACvB,IAAA,MAAMmD,KAAAA,GAAQ,CAAC,GAAG,IAAA,CAAKrD,YAAY,CAAA;AACnC,IAAA,IAAA,CAAKA,eAAe,EAAA;AACpB,IAAA,IAAA,CAAK1C,MAAMI,cAAAA,GAAiB,CAAA;AAE5B,IAAA,KAAA,MAAWyD,UAAUkC,KAAAA,EAAO;AAC1B,MAAA,IAAA,CAAK5D,IAAAA,CAAK,UAAU0B,MAAM,CAAA;AAAA,IAC5B;AAAA,EACF;AAAA,EAEQf,iBAAAA,GAAiB;AACvB,IAAA,IAAA,CAAKZ,iBAAAA,EAAAA;AACL,IAAA,MAAMmG,KAAAA,GAAQC,IAAAA,CAAKC,GAAAA,CACjB,IAAA,CAAKnJ,MAAAA,EAAQO,iBAAiB,CAAA,KAAI,IAAA,CAAKuC,iBAAAA,GAAoB,CAAA,CAAA,EAC3D,GAAK,CAAA;AAGP,IAAA,IAAA,CAAKN,cAAAA,GAAiB4G,WAAW,MAAK;AACpC,MAAA,IAAA,CAAK9H,OAAAA,EAAO,CAAG+H,KAAAA,CAAM1F,OAAAA,CAAQxB,KAAK,CAAA;AAAA,IACpC,GAAG8G,KAAK,CAAA;AAER,IAAA,IAAA,CAAKpG,KAAK,cAAA,EAAgB;AAAA,MAAEyG,SAAS,IAAA,CAAKxG,iBAAAA;AAAAA,MAAmBmG;AAAAA,KAAO,CAAA;AAAA,EACtE;AAAA,EAEQ5F,cAAAA,GAAc;AACpB,IAAA,IAAA,CAAKX,cAAAA,GAAiB6G,YAAY,MAAK;AACrC,MAAA,IAAI,IAAA,CAAK3I,MAAMC,SAAAA,EAAW;AACxB,QAAA,IAAA,CAAKkC,KAAK,WAAA,EAAa;AAAA,UAAEG,SAAAA,EAAWC,KAAKC,GAAAA;AAAG,SAAI,CAAA;AAAA,MAClD;AAAA,IACF,CAAA,EAAG,IAAA,CAAKpD,MAAAA,EAAQQ,iBAAiB,CAAA;AAAA,EACnC;AAAA,EAEQuC,IAAAA,CAAKgB,MAAc9B,IAAAA,EAAS;AAClC,IAAA,IAAI,CAAC,IAAA,CAAKP,EAAAA,IAAM,CAAC,IAAA,CAAKd,MAAMC,SAAAA,EAAW;AACrC,MAAA,IAAI,IAAA,CAAKb,MAAAA,EAAQU,kBAAAA,IAAsBqD,IAAAA,KAAS,QAAA,EAAU;AACxD,QAAA,IAAA,CAAKT,YAAAA,CAAakD,KAAKvE,IAAI,CAAA;AAC3B,QAAA,IAAA,CAAKrB,KAAAA,CAAMI,cAAAA,GAAiB,IAAA,CAAKsC,YAAAA,CAAaC,MAAAA;AAAAA,MAChD;AACA,MAAA;AAAA,IACF;AAEA,IAAA,IAAI;AACF,MAAA,IAAA,CAAK7B,EAAAA,CAAGqB,IAAAA,CAAKc,IAAAA,CAAK2F,SAAAA,CAAU;AAAA,QAAEzF,IAAAA;AAAAA,QAAM9B;AAAAA,OAAM,CAAC,CAAA;AAAA,IAC7C,SAASE,KAAAA,EAAO;AACdwB,MAAAA,OAAAA,CAAQxB,KAAAA,CAAM,0BAA0BA,KAAK,CAAA;AAC7C,MAAA,IAAA,CAAKC,YAAYD,KAAc,CAAA;AAAA,IACjC;AAAA,EACF;AAAA,EAEQf,cAAAA,GAAc;AACpB,IAAA,OAAO,CAAA,KAAA,EAAQ+B,IAAAA,CAAKC,GAAAA,EAAK,IAAI8F,IAAAA,CAAKO,MAAAA,EAAM,CAAGC,QAAAA,CAAS,EAAE,CAAA,CAAEC,MAAAA,CAAO,CAAA,EAAG,CAAC,CAAC,CAAA,CAAA;AAAA,EACtE;AAAA,EAEQnC,gBAAAA,GAAgB;AACtB,IAAA,OAAO,CAAA,OAAA,EAAUrE,IAAAA,CAAKC,GAAAA,EAAK,IAAI8F,IAAAA,CAAKO,MAAAA,EAAM,CAAGC,QAAAA,CAAS,EAAE,CAAA,CAAEC,MAAAA,CAAO,CAAA,EAAG,CAAC,CAAC,CAAA,CAAA;AAAA,EACxE;AAAA,EAEQlC,cAAAA,CAAe5C,QAAgBC,GAAAA,EAAW;AAChD,IAAA,MAAM8E,cAAAA,GAAiB,KAAKjF,UAAAA,CAAWC,GAAAA,CAAI,GAAGC,MAAM,CAAA,CAAA,EAAIC,GAAG,CAAA,CAAE,CAAA,IAAK,CAAA;AAClE,IAAA,OAAO8E,cAAAA,GAAiB,CAAA;AAAA,EAC1B;AAAA,EAEQjC,kBAAkBxH,KAAAA,EAAa;AAErC,IAAA,IAAI0J,IAAAA,GAAO,CAAA;AACX,IAAA,KAAA,IAASC,CAAAA,GAAI,CAAA,EAAGA,CAAAA,GAAI3J,KAAAA,CAAMoD,QAAQuG,CAAAA,EAAAA,EAAK;AACrCD,MAAAA,IAAAA,GAAAA,CAASA,IAAAA,IAAQ,CAAA,IAAKA,IAAAA,GAAQ1J,KAAAA,CAAM4J,WAAWD,CAAC,CAAA;AAChDD,MAAAA,IAAAA,GAAOA,IAAAA,GAAOA,IAAAA;AAAAA,IAChB;AACA,IAAA,OAAOA,IAAAA,CAAKH,SAAS,EAAE,CAAA;AAAA,EACzB;AAAA;AAAA,EAIAM,QAAAA,GAAQ;AACN,IAAA,OAAO;AAAA,MAAE,GAAG,IAAA,CAAKpJ;AAAAA;EACnB;AAAA,EAEAqJ,QAAAA,GAAQ;AACN,IAAA,OAAO3E,MAAMC,IAAAA,CAAK,IAAA,CAAK3E,KAAAA,CAAMM,KAAAA,CAAMgJ,QAAQ,CAAA;AAAA,EAC7C;AAAA,EAEAC,YAAAA,GAAY;AACV,IAAA,OAAO,CAAC,GAAG,IAAA,CAAK5D,aAAa,CAAA;AAAA,EAC/B;AAAA,EAEA6D,eAAAA,CAAgB9D,QAAAA,EAAoBkC,UAAAA,EAA2CC,WAAAA,EAAoB;AACjGnC,IAAAA,QAAAA,CAASkC,UAAAA,GAAaA,UAAAA;AACtBlC,IAAAA,QAAAA,CAASmC,WAAAA,GAAcA,WAAAA;AACvB,IAAA,IAAA,CAAKE,wBAAwBrC,QAAQ,CAAA;AAAA,EACvC;AAAA,EAEA+D,WAAAA,CAAYrH,QAAgBC,QAAAA,EAAgB;AAC1C,IAAA,IAAA,CAAK9B,WAAAA,GAAc6B,MAAAA;AACnB,IAAA,IAAA,CAAK3B,aAAAA,GAAgB4B,QAAAA;AAErB,IAAA,IAAI,IAAA,CAAKrC,MAAMC,SAAAA,EAAW;AACxB,MAAA,IAAA,CAAKkC,KAAK,UAAA,EAAY;AAAA,QACpBC,MAAAA;AAAAA,QACAC,QAAAA;AAAAA,QACAC,SAAAA,EAAWC,KAAKC,GAAAA;AAAG,OACpB,CAAA;AAAA,IACH;AAAA,EACF;AAAA;AAAA,EAIAkH,eAAAA,CAAgBzF,QAAgBC,GAAAA,EAAW;AACzC,IAAA,IAAI,CAAC,IAAA,CAAKlE,KAAAA,CAAMC,SAAAA,EAAW;AAE3B,IAAA,IAAA,CAAKkC,KAAK,MAAA,EAAQ;AAAA,MAChB8B,MAAAA;AAAAA,MACAC,GAAAA;AAAAA,MACA9B,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,MACb+B,SAAAA,EAAWC,KAAKC,GAAAA;AAAG,KACpB,CAAA;AAAA,EACH;AAAA,EAEAmH,iBAAAA,CAAkB1F,QAAgBC,GAAAA,EAAW;AAC3C,IAAA,IAAI,CAAC,IAAA,CAAKlE,KAAAA,CAAMC,SAAAA,EAAW;AAE3B,IAAA,IAAA,CAAKkC,KAAK,QAAA,EAAU;AAAA,MAClB8B,MAAAA;AAAAA,MACAC,GAAAA;AAAAA,MACA9B,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,MACb+B,SAAAA,EAAWC,KAAKC,GAAAA;AAAG,KACpB,CAAA;AAAA,EACH;AAAA,EAEAoH,WAAAA,CAAY3F,MAAAA,EAAgBC,GAAAA,EAAa2F,OAAAA,EAAe;AACtD,IAAA,IAAI,CAAC,IAAA,CAAK7J,KAAAA,CAAMC,SAAAA,EAAW;AAE3B,IAAA,IAAA,CAAKkC,KAAK,SAAA,EAAW;AAAA,MACnB8B,MAAAA;AAAAA,MACAC,GAAAA;AAAAA,MACA2F,OAAAA;AAAAA,MACAzH,QAAQ,IAAA,CAAK7B,WAAAA;AAAAA,MACb8B,UAAU,IAAA,CAAK5B,aAAAA;AAAAA,MACf6B,SAAAA,EAAWC,KAAKC,GAAAA;AAAG,KACpB,CAAA;AAAA,EACH;AAAA;AAAA,EAIAsH,OAAAA,GAAO;AACL,IAAA,IAAA,CAAKnI,UAAAA,EAAU;AACf,IAAA,IAAA,CAAKoI,kBAAAA,EAAkB;AAGvB,IAAA,IAAA,CAAKrH,aAAaC,MAAAA,GAAS,CAAA;AAC3B,IAAA,IAAA,CAAKD,eAAe,EAAA;AACpB,IAAA,IAAA,CAAKiD,cAAchD,MAAAA,GAAS,CAAA;AAC5B,IAAA,IAAA,CAAKgD,gBAAgB,EAAA;AACrB,IAAA,IAAA,CAAKK,eAAenD,KAAAA;AACpB,IAAA,IAAA,CAAKkB,WAAWlB,KAAAA;AAChB,IAAA,IAAA,CAAK7C,KAAAA,CAAMM,MAAMuC,KAAAA;AAGjB,IAAA,IAAA,CAAK/B,EAAAA,GAAK,IAAA;AAAA,EACZ;AACD;AAGM,MAAMkJ,YAAAA,GAAe,IAAI/K,YAAAA;;;;;;;"}