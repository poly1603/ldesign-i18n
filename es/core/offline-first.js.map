{"version":3,"file":"offline-first.js","sources":["../../src/core/offline-first.ts"],"sourcesContent":[null],"names":["OfflineManager","constructor","config","Object","defineProperty","value","navigator","onLine","enabled","serviceWorkerPath","cacheStrategy","cacheName","maxAge","maxEntries","enableBackgroundSync","syncInterval","enableIndexedDB","initialize","registerServiceWorker","initializeIndexedDB","initializeCache","setupNetworkListeners","startBackgroundSync","console","warn","swCode","generateServiceWorkerCode","blob","Blob","type","swBlobUrl","URL","revokeObjectURL","createObjectURL","serviceWorkerRegistration","serviceWorker","register","scope","addEventListener","ready","setupMessageChannel","error","JSON","stringify","precache","window","Promise","resolve","reject","request","indexedDB","open","onerror","onsuccess","db","result","onupgradeneeded","event","target","objectStoreNames","contains","store","createObjectStore","keyPath","createIndex","unique","autoIncrement","cacheStorage","caches","onlineHandler","isOnline","syncPendingData","offlineHandler","eventListeners","push","handler","messageHandler","data","saveOffline","locale","namespace","messages","id","timestamp","Date","now","transaction","objectStore","promisifyRequest","put","response","Response","headers","toISOString","Request","localStorage","setItem","e","loadOffline","get","isExpired","match","json","stored","getItem","parse","addToSyncQueue","item","syncQueue","length","MAX_SYNC_QUEUE_SIZE","shift","syncItem","Math","random","retries","add","sync","catch","err","syncTimer","setInterval","completed","processSyncItem","filter","includes","delete","setTimeout","clearExpiredCache","index","openCursor","cursor","continue","keysToRemove","i","key","startsWith","forEach","removeItem","getOfflineStats","cacheSize","syncQueueLength","lastSync","destroy","removeEventListener","unregister","undefined","close","clearInterval","createOfflineManager"],"mappings":"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"}